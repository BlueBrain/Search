schema: '2.0'
stages:
  train_models@3:
    cmd: python train.py --annotation_files ../../annotations/ner/annotations9_EmmanuelleLogette_2020-07-08_raw6_CelltypeProtein.jsonl
      --output_dir ../../models/ner/model4 --model_name model4
    deps:
    - path: ../../annotations/ner/annotations9_EmmanuelleLogette_2020-07-08_raw6_CelltypeProtein.jsonl
      md5: ec5d6b86181b9e4cdefb2b2198d5ae4f
      size: 267307
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: train.py
      md5: 1ccae6b57456b9e5790a0f1232880f4b
      size: 2505
    params:
      params.yaml:
        train.model4:
          prodigy_train_kwargs:
            spacy_model: en_ner_jnlpba_md
            eval_split: 0.1
            n_iter: 10
            dropout: 0.2
    outs:
    - path: ../../models/ner/model4
      md5: 60213648fac010c178b81983ff76492b.dir
      size: 100214049
      nfiles: 16
  train_models@4:
    cmd: python train.py --annotation_files ../../annotations/ner/annotations15_EmmanuelleLogette_2020-09-22_raw9_Pathway.jsonl
      --output_dir ../../models/ner/model5 --model_name model5
    deps:
    - path: ../../annotations/ner/annotations15_EmmanuelleLogette_2020-09-22_raw9_Pathway.jsonl
      md5: ceb6ea77d2a6a69962b88218f4f5a663
      size: 394725
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: train.py
      md5: 1ccae6b57456b9e5790a0f1232880f4b
      size: 2505
    params:
      params.yaml:
        train.model5:
          prodigy_train_kwargs:
            spacy_model: en_ner_craft_md
            eval_split: 0.1
            n_iter: 10
            dropout: 0.2
    outs:
    - path: ../../models/ner/model5
      md5: aab9909077d22a91c01042bf7468e80d.dir
      size: 100222954
      nfiles: 16
  train_models@1:
    cmd: python train.py --annotation_files ../../annotations/ner/annotations14_EmmanuelleLogette_2020-09-02_raw8_CellCompartmentDrugOrgan.jsonl
      --output_dir ../../models/ner/model2 --model_name model2
    deps:
    - path: ../../annotations/ner/annotations14_EmmanuelleLogette_2020-09-02_raw8_CellCompartmentDrugOrgan.jsonl
      md5: 2459e49418599ff96ab9db60a29b757b
      size: 953728
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: train.py
      md5: 1ccae6b57456b9e5790a0f1232880f4b
      size: 2505
    params:
      params.yaml:
        train.model2:
          prodigy_train_kwargs:
            spacy_model: en_ner_bionlp13cg_md
            eval_split: 0.1
            n_iter: 10
            dropout: 0.2
    outs:
    - path: ../../models/ner/model2
      md5: 2e3337ad9af49c9fef0332b6c3ad0832.dir
      size: 100192674
      nfiles: 16
  train_models@2:
    cmd: python train.py --annotation_files ../../annotations/ner/annotations6_EmmanuelleLogette_2020-07-07_raw4_TaxonChebi.jsonl
      --output_dir ../../models/ner/model3 --model_name model3
    deps:
    - path: ../../annotations/ner/annotations6_EmmanuelleLogette_2020-07-07_raw4_TaxonChebi.jsonl
      md5: 4b6fff4b0091fa10ae7c88a4aeb42ae0
      size: 969928
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: train.py
      md5: 1ccae6b57456b9e5790a0f1232880f4b
      size: 2505
    params:
      params.yaml:
        train.model3:
          prodigy_train_kwargs:
            spacy_model: en_ner_craft_md
            eval_split: 0.1
            n_iter: 10
            dropout: 0.2
    outs:
    - path: ../../models/ner/model3
      md5: 1e6e071c4a730f49f671155e2c6065db.dir
      size: 100227109
      nfiles: 16
  train_models@0:
    cmd: python train.py --annotation_files ../../annotations/ner/annotations5_EmmanuelleLogette_2020-06-30_raw2_Disease.jsonl
      --output_dir ../../models/ner/model1 --model_name model1
    deps:
    - path: ../../annotations/ner/annotations5_EmmanuelleLogette_2020-06-30_raw2_Disease.jsonl
      md5: 613308ed830d86284a1aee2747d911d0
      size: 324136
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: train.py
      md5: 1ccae6b57456b9e5790a0f1232880f4b
      size: 2505
    params:
      params.yaml:
        train.model1:
          prodigy_train_kwargs:
            spacy_model: en_ner_bc5cdr_md
            eval_split: 0.1
            n_iter: 10
            dropout: 0.2
    outs:
    - path: ../../models/ner/model1
      md5: 4c687b7dd44d0f7adc2d3df2e2e4f624.dir
      size: 100181750
      nfiles: 16
  add_er_4:
    cmd: python add_er.py --model ../../models/ner/model4 --etypes CELL_TYPE,PROTEIN
      --patterns_file ../../annotations/ner/rule_based_patterns.jsonl --output_file
      ../../models/ner_er/model4
    deps:
    - path: ../../annotations/ner/rule_based_patterns.jsonl
      md5: 044c1a326c2472aa4eb72c4c98a7400b
      size: 1709
    - path: ../../models/ner/model4
      md5: 60213648fac010c178b81983ff76492b.dir
      size: 100214049
      nfiles: 16
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: add_er.py
      md5: dc7fbe1d2370f056eef99dad7c9da011
      size: 2833
    params:
      params.yaml:
        eval.CELL_TYPE:
          etype_name: CELL_TYPE
        eval.PROTEIN:
          etype_name: PROTEIN
    outs:
    - path: ../../models/ner_er/model4
      md5: 00b992b7a23d903e5a090657dc6af453.dir
      size: 100215798
      nfiles: 18
  evals@7:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model4 --output_file ../../metrics/ner/PROTEIN.json
      --etype PROTEIN
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model4
      md5: 00b992b7a23d903e5a090657dc6af453.dir
      size: 100215798
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.PROTEIN:
          etype_name: PROTEIN
    outs:
    - path: ../../metrics/ner/PROTEIN.json
      md5: 5c0de70df94fddcbadbb1206e257efc8
      size: 263
  add_er_2:
    cmd: python add_er.py --model ../../models/ner/model2 --etypes CELL_COMPARTMENT,DRUG,ORGAN
      --patterns_file ../../annotations/ner/rule_based_patterns.jsonl --output_file
      ../../models/ner_er/model2
    deps:
    - path: ../../annotations/ner/rule_based_patterns.jsonl
      md5: 044c1a326c2472aa4eb72c4c98a7400b
      size: 1709
    - path: ../../models/ner/model2
      md5: 2e3337ad9af49c9fef0332b6c3ad0832.dir
      size: 100192674
      nfiles: 16
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: add_er.py
      md5: dc7fbe1d2370f056eef99dad7c9da011
      size: 2833
    params:
      params.yaml:
        eval.CELL_COMPARTMENT:
          etype_name: CELLULAR_COMPONENT
        eval.DRUG:
          etype_name: SIMPLE_CHEMICAL
        eval.ORGAN:
          etype_name: ORGAN
    outs:
    - path: ../../models/ner_er/model2
      md5: bf09a6293528ff512e97e8eca8420f33.dir
      size: 100194437
      nfiles: 18
  evals@2:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model2 --output_file ../../metrics/ner/DRUG.json
      --etype DRUG
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model2
      md5: bf09a6293528ff512e97e8eca8420f33.dir
      size: 100194437
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.DRUG:
          etype_name: SIMPLE_CHEMICAL
    outs:
    - path: ../../metrics/ner/DRUG.json
      md5: 27d7edd2cf470318fcf8be22f3610c0c
      size: 272
  evals@3:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model2 --output_file ../../metrics/ner/ORGAN.json
      --etype ORGAN
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model2
      md5: bf09a6293528ff512e97e8eca8420f33.dir
      size: 100194437
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.ORGAN:
          etype_name: ORGAN
    outs:
    - path: ../../metrics/ner/ORGAN.json
      md5: 55df17bf18a84a6ef670ae8b2e80af73
      size: 275
  add_er_5:
    cmd: python add_er.py --model ../../models/ner/model5 --etypes PATHWAY --patterns_file
      ../../annotations/ner/rule_based_patterns.jsonl --output_file ../../models/ner_er/model5
    deps:
    - path: ../../annotations/ner/rule_based_patterns.jsonl
      md5: 044c1a326c2472aa4eb72c4c98a7400b
      size: 1709
    - path: ../../models/ner/model5
      md5: aab9909077d22a91c01042bf7468e80d.dir
      size: 100222954
      nfiles: 16
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: add_er.py
      md5: dc7fbe1d2370f056eef99dad7c9da011
      size: 2833
    params:
      params.yaml:
        eval.PATHWAY:
          etype_name: PATHWAY
    outs:
    - path: ../../models/ner_er/model5
      md5: 958f3d6edfb8216c31d39af0032ee4a9.dir
      size: 100224717
      nfiles: 18
  evals@8:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model5 --output_file ../../metrics/ner/PATHWAY.json
      --etype PATHWAY
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model5
      md5: 958f3d6edfb8216c31d39af0032ee4a9.dir
      size: 100224717
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.PATHWAY:
          etype_name: PATHWAY
    outs:
    - path: ../../metrics/ner/PATHWAY.json
      md5: 372df4c2666d0d12215d4189216fa783
      size: 274
  evals@1:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model2 --output_file ../../metrics/ner/CELL_COMPARTMENT.json
      --etype CELL_COMPARTMENT
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model2
      md5: bf09a6293528ff512e97e8eca8420f33.dir
      size: 100194437
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.CELL_COMPARTMENT:
          etype_name: CELLULAR_COMPONENT
    outs:
    - path: ../../metrics/ner/CELL_COMPARTMENT.json
      md5: 0dc8d0f92415d14edfa7cdc8e5381c65
      size: 260
  add_er_1:
    cmd: python add_er.py --model ../../models/ner/model1 --etypes DISEASE --patterns_file
      ../../annotations/ner/rule_based_patterns.jsonl --output_file ../../models/ner_er/model1
    deps:
    - path: ../../annotations/ner/rule_based_patterns.jsonl
      md5: 044c1a326c2472aa4eb72c4c98a7400b
      size: 1709
    - path: ../../models/ner/model1
      md5: 4c687b7dd44d0f7adc2d3df2e2e4f624.dir
      size: 100181750
      nfiles: 16
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: add_er.py
      md5: dc7fbe1d2370f056eef99dad7c9da011
      size: 2833
    params:
      params.yaml:
        eval.DISEASE:
          etype_name: DISEASE
    outs:
    - path: ../../models/ner_er/model1
      md5: 5757d1ea583e2ac6aa7e642e11b56325.dir
      size: 100183520
      nfiles: 18
  evals@0:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model1 --output_file ../../metrics/ner/DISEASE.json
      --etype DISEASE
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model1
      md5: 5757d1ea583e2ac6aa7e642e11b56325.dir
      size: 100183520
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.DISEASE:
          etype_name: DISEASE
    outs:
    - path: ../../metrics/ner/DISEASE.json
      md5: 034f6a3ffaabe1fdb4c0900b1c719fac
      size: 273
  add_er_3:
    cmd: python add_er.py --model ../../models/ner/model3 --etypes CHEMICAL,ORGANISM
      --patterns_file ../../annotations/ner/rule_based_patterns.jsonl --output_file
      ../../models/ner_er/model3
    deps:
    - path: ../../annotations/ner/rule_based_patterns.jsonl
      md5: 044c1a326c2472aa4eb72c4c98a7400b
      size: 1709
    - path: ../../models/ner/model3
      md5: 1e6e071c4a730f49f671155e2c6065db.dir
      size: 100227109
      nfiles: 16
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: add_er.py
      md5: dc7fbe1d2370f056eef99dad7c9da011
      size: 2833
    params:
      params.yaml:
        eval.CHEMICAL:
          etype_name: CHEBI
        eval.ORGANISM:
          etype_name: TAXON
    outs:
    - path: ../../models/ner_er/model3
      md5: 77dcf53eead91718cfdbf087b0901a1a.dir
      size: 100228858
      nfiles: 18
  evals@4:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model3 --output_file ../../metrics/ner/CHEMICAL.json
      --etype CHEMICAL
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model3
      md5: 77dcf53eead91718cfdbf087b0901a1a.dir
      size: 100228858
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.CHEMICAL:
          etype_name: CHEBI
    outs:
    - path: ../../metrics/ner/CHEMICAL.json
      md5: c88b746d0d3dbb0a2b1444c3ab64420c
      size: 259
  evals@5:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model3 --output_file ../../metrics/ner/ORGANISM.json
      --etype ORGANISM
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model3
      md5: 77dcf53eead91718cfdbf087b0901a1a.dir
      size: 100228858
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.ORGANISM:
          etype_name: TAXON
    outs:
    - path: ../../metrics/ner/ORGANISM.json
      md5: cb2fbe378ad643be3ab2d01b7350e591
      size: 275
  evals@6:
    cmd: python eval.py --annotation_files ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl,../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      --model ../../models/ner_er/model4 --output_file ../../metrics/ner/CELL_TYPE.json
      --etype CELL_TYPE
    deps:
    - path: ../../annotations/ner/annotations10_EmmanuelleLogette_2020-08-28_raw1_raw5_10EntityTypes.jsonl
      md5: 563441b77b5c39063cda3fa0fb03803c
      size: 883041
    - path: ../../annotations/ner/annotations12_EmmanuelleLogette_2020-08-28_raw7_10EntityTypes.jsonl
      md5: 117da032ef2e2792429dff88c06c90b7
      size: 62653
    - path: ../../models/ner_er/model4
      md5: 00b992b7a23d903e5a090657dc6af453.dir
      size: 100215798
      nfiles: 18
    - path: Dockerfile
      md5: 6bc72a8d70950b3491eb703ffddf7bc0
      size: 1987
    - path: eval.py
      md5: 3c9e86f7cbfaea90929e96a6443a16d4
      size: 3391
    params:
      params.yaml:
        eval.CELL_TYPE:
          etype_name: CELL_TYPE
    outs:
    - path: ../../metrics/ner/CELL_TYPE.json
      md5: 690a1b81737164cfed2553c9e6852ca2
      size: 272
