schema: '2.0'
stages:
  eval_biobert_nli_sts:
    cmd: python eval.py --annotation_files=../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      --model=biobert_nli_sts --output_dir=../../metrics/sentence_embedding
    deps:
    - path: ../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      md5: 92a4235ce8d292ff382ce008c31da45c
      size: 14587
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: eval.py
      md5: 6e1ef54521c77c992c2fbc07be0c7bfe
      size: 4513
    params:
      params.yaml:
        eval.biobert_nli_sts:
          class: SentTransformer
          init_kwargs:
            model_name_or_path: clagator/biobert_v1.1_pubmed_nli_sts
    outs:
    - path: ../../metrics/sentence_embedding/biobert_nli_sts.csv
      md5: 9560cc7eeef674eae5af3a29d8dd66c2
      size: 1256
    - path: ../../metrics/sentence_embedding/biobert_nli_sts.json
      md5: f6e6b6d190003ea076e689e9e35dcb22
      size: 104
    - path: ../../metrics/sentence_embedding/biobert_nli_sts.png
      md5: 86db1f66aaa757523aef3f04088cddfd
      size: 153514
  train_tf_idf:
    cmd: python train.py --sentences_file=../../annotations/sentence_embedding/cord19_v47_sentences_pre.txt
      --model=tf_idf --output_dir=../../models/sentence_embedding/tf_idf
    deps:
    - path: ../../annotations/sentence_embedding/cord19_v47_sentences_pre.txt
      md5: d0c68b698738f714df81eb5fb29236fe
      size: 2202482311
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: train.py
      md5: 3a3955f5cbfe1e1bf53701b69e7f1857
      size: 3138
    params:
      params.yaml:
        train.tf_idf:
          init_kwargs:
            lowercase: true
    outs:
    - path: ../../models/sentence_embedding/tf_idf
      md5: ed37b15fe3406ab6c36f255f23d155a2.dir
      size: 73231015
      nfiles: 1
  eval_tf_idf:
    cmd: python eval.py --annotation_files=../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      --model=tf_idf --output_dir=../../metrics/sentence_embedding
    deps:
    - path: ../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      md5: 92a4235ce8d292ff382ce008c31da45c
      size: 14587
    - path: ../../models/sentence_embedding/tf_idf
      md5: ed37b15fe3406ab6c36f255f23d155a2.dir
      size: 73231015
      nfiles: 1
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: eval.py
      md5: 6e1ef54521c77c992c2fbc07be0c7bfe
      size: 4513
    params:
      params.yaml:
        eval.tf_idf:
          class: SklearnVectorizer
          init_kwargs:
            checkpoint_path: ../../models/sentence_embedding/tf_idf/model.pkl
    outs:
    - path: ../../metrics/sentence_embedding/tf_idf.csv
      md5: 212b39946c23a416a0056b5e48136b31
      size: 596
    - path: ../../metrics/sentence_embedding/tf_idf.json
      md5: 5d8beda62321460ed2221329b60d506a
      size: 106
    - path: ../../metrics/sentence_embedding/tf_idf.png
      md5: 4f814f17e4d070a44fb1ac181f638654
      size: 86578
  train_count:
    cmd: python train.py --sentences_file=../../annotations/sentence_embedding/cord19_v47_sentences_pre.txt
      --model=count --output_dir=../../models/sentence_embedding/count
    deps:
    - path: ../../annotations/sentence_embedding/cord19_v47_sentences_pre.txt
      md5: d0c68b698738f714df81eb5fb29236fe
      size: 2202482311
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: train.py
      md5: 3a3955f5cbfe1e1bf53701b69e7f1857
      size: 3138
    params:
      params.yaml:
        train.count:
          init_kwargs:
            lowercase: true
    outs:
    - path: ../../models/sentence_embedding/count
      md5: 8a0b977a24fe5ed2293c3fcd0288a138.dir
      size: 38375243
      nfiles: 1
  eval_count:
    cmd: python eval.py --annotation_files=../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      --model=count --output_dir=../../metrics/sentence_embedding
    deps:
    - path: ../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      md5: 92a4235ce8d292ff382ce008c31da45c
      size: 14587
    - path: ../../models/sentence_embedding/count
      md5: 8a0b977a24fe5ed2293c3fcd0288a138.dir
      size: 38375243
      nfiles: 1
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: eval.py
      md5: 6e1ef54521c77c992c2fbc07be0c7bfe
      size: 4513
    params:
      params.yaml:
        eval.count:
          class: SklearnVectorizer
          init_kwargs:
            checkpoint_path: ../../models/sentence_embedding/count/model.pkl
    outs:
    - path: ../../metrics/sentence_embedding/count.csv
      md5: de5820a6b76984ac81eed350a1807f88
      size: 611
    - path: ../../metrics/sentence_embedding/count.json
      md5: 90ca5beef27c502587f20bfcf6187283
      size: 105
    - path: ../../metrics/sentence_embedding/count.png
      md5: 4f814f17e4d070a44fb1ac181f638654
      size: 86578
  eval_sbert:
    cmd: python eval.py --annotation_files=../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      --model=sbert --output_dir=../../metrics/sentence_embedding
    deps:
    - path: ../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      md5: 92a4235ce8d292ff382ce008c31da45c
      size: 14587
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: eval.py
      md5: 6e1ef54521c77c992c2fbc07be0c7bfe
      size: 4513
    params:
      params.yaml:
        eval.sbert:
          class: SentTransformer
          init_kwargs:
            model_name_or_path: bert-base-nli-mean-tokens
    outs:
    - path: ../../metrics/sentence_embedding/sbert.csv
      md5: 1aa10d5f198369bcaa869e34399e9ac8
      size: 1209
    - path: ../../metrics/sentence_embedding/sbert.json
      md5: fbce52e6829fb6e7e1023a4307a71cfa
      size: 105
    - path: ../../metrics/sentence_embedding/sbert.png
      md5: 3a6f531fec2c30662ee4e523976ff048
      size: 156836
  eval_sbiobert:
    cmd: python eval.py --annotation_files=../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      --model=sbiobert --output_dir=../../metrics/sentence_embedding
    deps:
    - path: ../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      md5: 92a4235ce8d292ff382ce008c31da45c
      size: 14587
    - path: Dockerfile
      md5: a11a4c1d4fb63322f5973ed59887fe4f
      size: 1735
    - path: eval.py
      md5: 6e1ef54521c77c992c2fbc07be0c7bfe
      size: 4513
    params:
      params.yaml:
        eval.sbiobert:
          class: SentTransformer
          init_kwargs:
            model_name_or_path: gsarti/biobert-nli
    outs:
    - path: ../../metrics/sentence_embedding/sbiobert.csv
      md5: c2c55aea18b0a4a258c9424d655d25a1
      size: 1212
    - path: ../../metrics/sentence_embedding/sbiobert.json
      md5: 98372b5fc5a303435250579b6346df74
      size: 105
    - path: ../../metrics/sentence_embedding/sbiobert.png
      md5: ddf8088966ccc676ca449eada9364c1a
      size: 155274
  eval_biobert_nli_sts_cord19_v1:
    cmd: python eval.py --annotation_files=../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      --model=biobert_nli_sts_cord19_v1 --output_dir=../../metrics/sentence_embedding
    deps:
    - path: ../../annotations/sentence_embedding/sentence_similarity_cord19.csv
      md5: 92a4235ce8d292ff382ce008c31da45c
      size: 14587
    - path: ../../models/sentence_embedding/biobert_nli_sts_cord19_v1
      md5: 9dccac418759a8c53f5da608dbd9f835.dir
      size: 433540587
      nfiles: 9
    - path: eval.py
      md5: 6e1ef54521c77c992c2fbc07be0c7bfe
      size: 4513
    params:
      params.yaml:
        eval.biobert_nli_sts_cord19_v1:
          class: SentTransformer
          init_kwargs:
            model_name_or_path: ../../models/sentence_embedding/biobert_nli_sts_cord19_v1/
    outs:
    - path: ../../metrics/sentence_embedding/biobert_nli_sts_cord19_v1.csv
      md5: 0af5d8ab4ae30b1eb9472363091b9fed
      size: 1258
    - path: ../../metrics/sentence_embedding/biobert_nli_sts_cord19_v1.json
      md5: 2cf62421ad0e64750ba4768b1c68cac3
      size: 104
    - path: ../../metrics/sentence_embedding/biobert_nli_sts_cord19_v1.png
      md5: c310722f7dcac36cae1c25c382cfd89b
      size: 153802
